<?php

	if( $row['pw'] == $encryped_pass ) {
        $_SESSION['is_logged'] = 'YES';
        $_SESSION['user_id'] = $user_id;
        header("Location: http://snspd.com/member/login_done.php");
        exit();
    }
    else {
        $_SESSION['is_logged'] = 'NO';
        $_SESSION['user_id'] = '';
        header("Location: http://snspd.com/member/login_done.php");
        exit();
    } 
?>

<?php
session_start();
$is_logged = $_SESSION['is_logged'];
if($is_logged=='YES') {
    $user_id = $_SESSION['user_id'];
    $message = $user_id . ' 님, 로그인 했습니다.';
}
else {
    $message = '로그인이 실패했습니다.';
}

var_dump($_SESSION);

?>
<html>
    <head>
        <title>로그인 완료 페이지</title>
        <meta charset="utf-8" >
    </head>
    <body>
        login_done.php - 로그인 완료 페이지<br />
        <hr />
<?php
    echo $message;
?>
    </body>
</html> 


//////////////////////////////////////////////////////////////////////////

API 호출하는 페이지 예
<?php
session_start();

$_SESSION["login"] = "true";

?>
<script>
var xhr = new XMLHttpRequest();
xhr.open("./api.php");
xhr.send();
</script>


./api.php 페이지 소스 예
<?php

session_start();

if($_SESSION["login"] == "true") {
    //로그인 정상 처리: Response 200
} else {
    // 권한 오류 처리: Response 403
    die();
}
?>


//////////////////////////////////////////////////////////////////////////

if(require_once("auth.php")) {

//run json code

}







////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


$.ajax({
type: 'POST',
url: '<?php echo $view->getThemePath()?>/elements/s_session.php ?>',
data: {'value': out}
})
.done(function(data){
alert(data);
window.location.href = 'ord_d';
}).error(function(er){
alert('error');
});


s_session.php
<?php
session_start();
if(isset($_POST)){
if (isset($_POST['value'])) {
$value = $_POST['value'];
$_SESSION['pdtmsr-qrcode'] = $value;
echo $_SESSION['pdtmsr-qrcode'];
}
}
?>


